function promAjax(a){return new Promise(function(c,b){$.ajax(a).done(c).fail(b)})}function loadedGmap(){var f=new google.maps.LatLng(6.593691,3.352847);var a=[{featureType:"landscape",stylers:[{saturation:-100},{lightness:60}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"on"},{lightness:30}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ef8c25"},{lightness:40}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#b6c54c"},{lightness:40},{saturation:-40}]},{}];var b={zoom:15,center:f,mapTypeId:google.maps.MapTypeId.ROADMAP,navigationControl:true,mapTypeControl:false,scrollwheel:false,styles:a,disableDoubleClickZoom:true};var d=new google.maps.Map(document.getElementById("google_map"),b);var e=new google.maps.Marker({position:f,map:d});google.maps.event.addListener(e,"click",function(){c.open(d,e)});var c=new google.maps.InfoWindow({content:'<h5 class="info"><strong>This is our HQ </strong><br><br>You can find us at<br> 32846 Sydney</h5>'})}$(".carousel.three .item").each(function(){var a=$(this).next();if(!a.length){a=$(this).siblings(":first")}a.children(":first-child").clone().appendTo($(this));if(a.next().length>0){a.next().children(":first-child").clone().appendTo($(this))}else{$(this).siblings(":first").children(":first-child").clone().appendTo($(this))}});function validateEmail(a){var b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}$(document).ready(function(){$("form.form-email").submit(function(j){if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}var c=$(this).closest("form.form-email");var d=c.find("button");d.prop("disabled",true);var o=c.find(".form-input-email");var n=c.find(".form-input-name");var a=c.find(".form-input-message");var k=c.find("[name=g-recaptcha-response]")[0];console.log(k);if(c.attr("data-form-type").indexOf("nob")>-1){var g=o.val(),h="",l="Message from "+n.val(),b=a.val(),m="<p>"+a.val()+"<p>",i=n.val(),f="Fakey McFakeName",k=k.value;console.log(k);if(validateEmail(g)){var p=JSON.stringify({sendFrom:g,fromName:i,sendTo:h,toName:f,subject:l,msg:b,msgHTML:m,captcha:k})}$.ajax({url:"../html_elements/mailer.php",crossDomain:false,data:p,method:"POST",cache:false,dataType:"json",contentType:"application/json; charset=utf-8",success:function(q){console.log(q);var e=q;d.removeClass("btn-primary");if(e.success){o.val("");n.val("");a.val("");d.html("Received");d.addClass("btn-success")}else{d.html("Sorry an error occurred");d.addClass("btn-danger")}d.prop("disabled",false);grecaptcha.reset()},error:function(e){console.log("Email was not sent successfully.");console.log(e);d.html("Sorry an error occured");d.removeClass("btn-primary");d.addClass("btn-danger");d.prop("disabled",false);grecaptcha.reset()}})}})});function validateCard(c){console.log("Charge response: ");console.log(c);$(".donate-page-3").removeClass("hidden");switch(c.status){case"success":return c;case"auth":break;default:return this.reject({status:false,reason:"error-2"})}var d=c.data.auth;var b=$("#nob-paystack-verification-form");var a=b.find("#donate-verification");var f="PIN";switch(c.data.auth){case"PIN":break;case"OTP":f="One Time Password";var e=b.find(".form-input-token");e.dataset.paystack="otp";e.placeholder="OTP";break;case"3DS":return paystack.card.verify3DS();case"phone":return paystack.card.validatePhone({phone:phone});default:return this.reject({status:false,reason:"error-3"})}a.innerHTML=f;return c}function resetForm(a){console.log("Reset form now: ");console.log(a);$(".donate-page-3").addClass("hidden");$(".donate-page-4").removeClass("hidden");var b={data:{firstName:firstName,lastName:lastName,email:email,phone:phone,street:street,streetOpt:streetOpt,city:city,postal:postal,country:country,state:state,referenceID:a.data.reference}};$.ajax({url:"html_elements/paystack/db-log.php",method:"POST",dataType:"JSON",data:b,success:function(c){console.log("Log response: ");console.log(c)},error:function(c){console.log("Log error: ");console.log(c)}});cardField.val("");nameField.val("");amountField.val("");emailField.val("");cvvField.val("");expMField.val("");expYField.val("");nameFirstField.val("");nameLastField.val("");phoneField.val("");streetField.val("");streetFieldOpt.val("");cityField.val("");postalField.val("");countryField.val("");stateField.val("");submitButton.html("Received");submitButton.addClass("btn-success")}$(document).ready(function(a){if($("body").hasClass("donate-page")){$(".form-input-token").submit(function(b){b.preventDefault();paystack.card.validateToken({token:readToken()}).then(validateCard).then(resetForm,function(c){console.log(c)})});$("#nob-paystack-card-form").submit(function(M){if(M.preventDefault){M.preventDefault()}else{M.returnValue=false}$(".donate-page-2").addClass("hidden");var z=$(this).closest("#nob-paystack-card-form");var h=z.find("button");var N=z.find("input[name=donate-occurrence]:checked");var B=z.find(".form-input-card");var I=z.find(".form-input-name");var w=z.find(".form-input-amount");var O=z.find(".form-input-email");var K=z.find(".form-input-cvv");var p=z.find(".form-input-exp-m");var y=z.find(".form-input-exp-y");var F=z.find(".form-input-pin");var o=z.find(".form-input-name-first");var b=z.find(".form-input-name-last");var C=z.find(".form-input-number-phone");var J=z.find(".form-input-address");var x=z.find(".form-input-address-opt");var d=z.find(".form-input-city");var P=z.find(".form-input-postal");var D=z.find(".form-input-country");var k=z.find(".form-input-state");var g=B.val(),m=I.val(),l=(N=="monthly"),f=parseInt(w.val())*100,t=O.val(),H=parseInt(K.val()),i=parseInt(p.val()),c=parseInt(y.val()),A=parseInt(F.val()),E=o.val(),s=b.val(),j=parseInt(C.val()),u=J.val(),v=x.val(),n=d.val(),q=P.val(),G=D.val(),Q=k.val();var r={EMAIL:t,AMOUNT:f,OCCURRENCE:l};var L;promAjax({url:"https://dolly-v2-pr-37.herokuapp.com/html_elements/paystack/authorize",method:"POST",cache:false,dataType:"JSON",data:r}).then(function(R){console.log("Authorize response: ");console.log(R);if(!R.status){return this.reject({status:false,reason:"error-1"})}var e=R.data;return Paystack.init({form:"nob-paystack-card-form",access_code:e.access_code})}).then(function(e){console.log("Init response: ");console.log(e);L=e;return L.card.charge()}).then(validateCard).then(resetForm,function(e){console.log(e)})})}});