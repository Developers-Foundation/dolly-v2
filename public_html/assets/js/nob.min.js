function promAjax(a){return new Promise(function(c,b){$.ajax(a).done(c).fail(b)})}function loadedGmap(){var f=new google.maps.LatLng(6.593691,3.352847);var a=[{featureType:"landscape",stylers:[{saturation:-100},{lightness:60}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"on"},{lightness:30}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ef8c25"},{lightness:40}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#b6c54c"},{lightness:40},{saturation:-40}]},{}];var b={zoom:15,center:f,mapTypeId:google.maps.MapTypeId.ROADMAP,navigationControl:true,mapTypeControl:false,scrollwheel:false,styles:a,disableDoubleClickZoom:true};var d=new google.maps.Map(document.getElementById("google_map"),b);var e=new google.maps.Marker({position:f,map:d});google.maps.event.addListener(e,"click",function(){c.open(d,e)});var c=new google.maps.InfoWindow({content:'<h5 class="info"><strong>This is our HQ </strong><br><br>You can find us at<br> 32846 Sydney</h5>'})}$(".carousel.three .item").each(function(){var a=$(this).next();if(!a.length){a=$(this).siblings(":first")}a.children(":first-child").clone().appendTo($(this));if(a.next().length>0){a.next().children(":first-child").clone().appendTo($(this))}else{$(this).siblings(":first").children(":first-child").clone().appendTo($(this))}});function validateEmail(a){var b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}$(document).ready(function(){$("form.form-email").submit(function(j){if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}var c=$(this).closest("form.form-email");var d=c.find("button");d.prop("disabled",true);var o=c.find(".form-input-email");var n=c.find(".form-input-name");var a=c.find(".form-input-message");var k=c.find("[name=g-recaptcha-response]")[0];console.log(k);if(c.attr("data-form-type").indexOf("nob")>-1){var g=o.val(),h="",l="Message from "+n.val(),b=a.val(),m="<p>"+a.val()+"<p>",i=n.val(),f="Fakey McFakeName",k=k.value;console.log(k);if(validateEmail(g)){var p=JSON.stringify({sendFrom:g,fromName:i,sendTo:h,toName:f,subject:l,msg:b,msgHTML:m,captcha:k})}$.ajax({url:"../html_elements/mailer.php",crossDomain:false,data:p,method:"POST",cache:false,dataType:"json",contentType:"application/json; charset=utf-8",success:function(q){console.log(q);var e=q;d.removeClass("btn-primary");if(e.success){o.val("");n.val("");a.val("");d.html("Received");d.addClass("btn-success")}else{d.html("Sorry an error occurred");d.addClass("btn-danger")}d.prop("disabled",false);grecaptcha.reset()},error:function(e){console.log("Email was not sent successfully.");console.log(e);d.html("Sorry an error occured");d.removeClass("btn-primary");d.addClass("btn-danger");d.prop("disabled",false);grecaptcha.reset()}})}})});function quickFillForm(){var o=$("#nob-paystack-card-form");var a=o.find("button");var b=o.find("input[name=donate-occurrence]:checked");var d=o.find(".form-input-card");var s=o.find(".form-input-name");var c=o.find(".form-input-amount");var k=o.find(".form-input-email");var m=o.find(".form-input-cvv");var j=o.find(".form-input-exp-m");var q=o.find(".form-input-exp-y");var t=o.find(".form-input-pin");var g=o.find(".form-input-name-first");var l=o.find(".form-input-name-last");var h=o.find(".form-input-number-phone");var e=o.find(".form-input-address");var f=o.find(".form-input-address-opt");var n=o.find(".form-input-city");var p=o.find(".form-input-postal");var i=o.find(".form-input-country");var r=o.find(".form-input-state");d.val("50785078507850780");s.val("Nobody Random");k.val("iamnobodyrandom@yahoo.com");m.val("884");j.val("12");q.val("20");t.val("0000");g.val("Nobody");l.val("Random");h.val("1234567890");e.val("123 NoWhere LoL");f.val("Line 2 of street .-.");n.val("CantThinkOfOne");p.val("123456");i.val("hmm");r.val("Ive given up")}function validateCard(c,d,f){console.log("Charge response: ");console.log(c);$(".donate-page-3").removeClass("hidden");switch(c.status){case"success":return c;case"auth":break;default:throw {status:false,reason:"error-2"}}var e=c.data.auth;var b=$("#nob-paystack-verification-form");var a=b.find("#donate-verification");var h="PIN";switch(c.data.auth){case"PIN":break;case"otp":h="One Time Password";var g=b.find(".form-input-token");g.dataset.paystack="otp";g.placeholder="OTP";break;case"3DS":return d.card.verify3DS();case"phone":return d.card.validatePhone({phone:phone});default:throw {status:false,reason:"Sorry, your credit card is not supported."}}a.innerHTML=h;return c}function resetForm(a,b,c){console.log("Reset form now: ");console.log(a);$(".donate-page-3").addClass("hidden");$(".donate-page-4").removeClass("hidden");var d={status:true,data:{firstName:c.firstName,lastName:c.lastName,email:c.email,phone:c.phone,street:c.street,streetOpt:c.streetOpt,city:c.city,postal:c.postal,country:c.country,state:c.state,referenceID:a.data.reference}};$.ajax({url:"html_elements/paystack/db-log.php",method:"POST",dataType:"JSON",data:d,success:function(e){console.log("Log response: ");console.log(e)},error:function(e){console.log("Log error: ");console.log(e)}});c.cardField.val("");c.nameField.val("");c.amountField.val("");c.emailField.val("");c.cvvField.val("");c.expMField.val("");c.expYField.val("");c.nameFirstField.val("");c.nameLastField.val("");c.phoneField.val("");c.streetField.val("");c.streetFieldOpt.val("");c.cityField.val("");c.postalField.val("");c.countryField.val("");c.stateField.val("");c.submitButton.html("Received");c.submitButton.addClass("btn-success");$(".donate-page-1").addClass("hidden");$(".donate-page-2").addClass("hidden");$(".donate-page-3").addClass("hidden");$(".donate-page-thanks").removeClass("hidden")}$(document).ready(function(c){if($("body").hasClass("donate-page")){var a;var b;$("form#nob-paystack-verification-form").submit(function(d){if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}a.card.validateToken({token:$(".form-input-token").val()}).then(function(e){return validateCard(e,a,b)}).then(function(e){return resetForm(e,a,b)},function(e){console.log(e)})});$("#donate-payment").on("hidden.bs.modal",function(){$(".donate-page-1").removeClass("hidden");$(".donate-amount-select").parent().removeClass("hidden");$(".donate-other-amount").parent().addClass("hidden");$('.donate-amount-select[data-amount="-1"]').parent().removeClass("hidden");$('.donate-amount-select[data-amount="-1"] div').removeClass("selected");$(".donate-page-2").addClass("hidden");$(".donate-page-thanks").addClass("hidden");$(".donate-page-error").addClass("hidden");grecaptcha.reset()});$("#nob-paystack-card-form").submit(function(N){if(N.preventDefault){N.preventDefault()}else{N.returnValue=false}$(".donate-page-2").addClass("hidden");var B=$(this).closest("#nob-paystack-card-form");var j=B.find("button");var O=B.find("input[name=donate-occurrence]:checked");var D=B.find(".form-input-card");var K=B.find(".form-input-name");var y=B.find(".form-input-amount");var P=B.find(".form-input-email");var M=B.find(".form-input-cvv");var r=B.find(".form-input-exp-m");var A=B.find(".form-input-exp-y");var H=B.find(".form-input-pin");var q=B.find(".form-input-name-first");var d=B.find(".form-input-name-last");var E=B.find(".form-input-number-phone");var L=B.find(".form-input-address");var z=B.find(".form-input-address-opt");var g=B.find(".form-input-city");var Q=B.find(".form-input-postal");var F=B.find(".form-input-country");var m=B.find(".form-input-state");var i=D.val(),o=K.val(),n=(O=="monthly"),h=parseInt(y.val())*100,v=P.val(),J=parseInt(M.val()),k=parseInt(r.val()),f=parseInt(A.val()),C=H.val(),G=q.val(),u=d.val(),l=parseInt(E.val()),w=L.val(),x=z.val(),p=g.val(),s=Q.val(),I=F.val(),R=m.val();var t={EMAIL:v,AMOUNT:h,OCCURRENCE:n};b={firstName:G,lastName:u,email:v,phone:l,street:w,streetOpt:x,city:p,postal:s,country:I,state:R,cardField:D,nameField:K,amountField:y,emailField:P,cvvField:M,expMField:r,expYField:A,nameFirstField:q,nameLastField:d,phoneField:E,streetField:L,streetFieldOpt:z,cityField:g,postalField:Q,countryField:F,stateField:m,captchaField:null,submitButton:j};promAjax({url:"https://dolly-v2.herokuapp.com/html_elements/paystack/authorize",method:"POST",cache:false,dataType:"JSON",data:t}).then(function(S){console.log("Authorize response: ");console.log(S);if(!S.status){throw {status:false,reason:"error-1"}}var e=S.data;return Paystack.init({form:"nob-paystack-card-form",access_code:e.access_code})}).then(function(e){console.log("Init response: ");console.log(e);a=e;var S={};console.log("PIN: "+C);if(C!=""&&C!=0&&C!=-1){S={pin:C}}return a.card.charge(S)}).then(function(e){return validateCard(e,a,b)}).then(function(e){return resetForm(e,a,b)},function(e){console.log(e);$.ajax({url:"html_elements/paystack/db-log.php",method:"POST",dataType:"JSON",data:{status:false,data:JSON.stringify(e)},success:function(S){console.log("Log response: ");console.log(S)},error:function(S){console.log("Log error: ");console.log(S)}});$(".donate-page-error").removeClass("hidden")})})}});